(jbuild_version 1)

(alias ((name sexp) (deps (examples.topscript.sexp))))

(rule (
  (targets (examples.topscript.sexp))
  (deps    (examples.topscript))
  (action (
    with-stdout-to ${@} (
      run ocaml-topexpect -dry-run -sexp -short-paths -verbose ${<})))))

(alias (
  (name code)
  (deps (examples.topscript))
  (action (
    progn
    (setenv OCAMLRUNPARAM "" (run ocaml-topexpect -short-paths -verbose ${<}))
    (diff? examples.topscript examples.topscript.corrected)))))

(alias ((name sexp) (deps (value_restriction.topscript.sexp))))

(rule (
  (targets (value_restriction.topscript.sexp))
  (deps    (value_restriction.topscript))
  (action (
    with-stdout-to ${@} (
      run ocaml-topexpect -dry-run -sexp -short-paths -verbose ${<})))))

(alias (
  (name code)
  (deps (value_restriction.topscript))
  (action (
    progn
    (setenv OCAMLRUNPARAM "" (run ocaml-topexpect -short-paths -verbose ${<}))
    (diff? value_restriction.topscript value_restriction.topscript.corrected)))))

(alias ((name sexp) (deps (weak.topscript.sexp))))

(rule (
  (targets (weak.topscript.sexp))
  (deps    (weak.topscript))
  (action (
    with-stdout-to ${@} (
      run ocaml-topexpect -dry-run -sexp -short-paths -verbose ${<})))))

(alias (
  (name code)
  (deps (weak.topscript))
  (action (
    progn
    (setenv OCAMLRUNPARAM "" (run ocaml-topexpect -short-paths -verbose ${<}))
    (diff? weak.topscript weak.topscript.corrected)))))

(alias ((name sexp) (deps (file2.topscript.sexp))))

(rule (
  (targets (file2.topscript.sexp))
  (deps    (file2.topscript))
  (action (
    with-stdout-to ${@} (
      run ocaml-topexpect -dry-run -sexp -short-paths -verbose ${<})))))

(alias (
  (name code)
  (deps (file2.topscript))
  (action (
    progn
    (setenv OCAMLRUNPARAM "" (run ocaml-topexpect -short-paths -verbose ${<}))
    (diff? file2.topscript file2.topscript.corrected)))))

(alias ((name sexp) (deps (lazy.topscript.sexp))))

(rule (
  (targets (lazy.topscript.sexp))
  (deps    (lazy.topscript))
  (action (
    with-stdout-to ${@} (
      run ocaml-topexpect -dry-run -sexp -short-paths -verbose ${<})))))

(alias (
  (name code)
  (deps (lazy.topscript))
  (action (
    progn
    (setenv OCAMLRUNPARAM "" (run ocaml-topexpect -short-paths -verbose ${<}))
    (diff? lazy.topscript lazy.topscript.corrected)))))

(alias ((name sexp) (deps (file.topscript.sexp))))

(rule (
  (targets (file.topscript.sexp))
  (deps    (file.topscript))
  (action (
    with-stdout-to ${@} (
      run ocaml-topexpect -dry-run -sexp -short-paths -verbose ${<})))))

(alias (
  (name code)
  (deps (file.topscript))
  (action (
    progn
    (setenv OCAMLRUNPARAM "" (run ocaml-topexpect -short-paths -verbose ${<}))
    (diff? file.topscript file.topscript.corrected)))))

(alias ((name sexp) (deps (ref.topscript.sexp))))

(rule (
  (targets (ref.topscript.sexp))
  (deps    (ref.topscript))
  (action (
    with-stdout-to ${@} (
      run ocaml-topexpect -dry-run -sexp -short-paths -verbose ${<})))))

(alias (
  (name code)
  (deps (ref.topscript))
  (action (
    progn
    (setenv OCAMLRUNPARAM "" (run ocaml-topexpect -short-paths -verbose ${<}))
    (diff? ref.topscript ref.topscript.corrected)))))

(alias ((name sexp) (deps (printf.topscript.sexp))))

(rule (
  (targets (printf.topscript.sexp))
  (deps    (printf.topscript))
  (action (
    with-stdout-to ${@} (
      run ocaml-topexpect -dry-run -sexp -short-paths -verbose ${<})))))

(alias (
  (name code)
  (deps (printf.topscript))
  (action (
    progn
    (setenv OCAMLRUNPARAM "" (run ocaml-topexpect -short-paths -verbose ${<}))
    (diff? printf.topscript printf.topscript.corrected)))))

(alias ((name sexp) (deps (letrec.topscript.sexp))))

(rule (
  (targets (letrec.topscript.sexp))
  (deps    (letrec.topscript))
  (action (
    with-stdout-to ${@} (
      run ocaml-topexpect -dry-run -sexp -short-paths -verbose ${<})))))

(alias (
  (name code)
  (deps (letrec.topscript))
  (action (
    progn
    (setenv OCAMLRUNPARAM "" (run ocaml-topexpect -short-paths -verbose ${<}))
    (diff? letrec.topscript letrec.topscript.corrected)))))

(alias ((name sexp) (deps (order.topscript.sexp))))

(rule (
  (targets (order.topscript.sexp))
  (deps    (order.topscript))
  (action (
    with-stdout-to ${@} (
      run ocaml-topexpect -dry-run -sexp -short-paths -verbose ${<})))))

(alias (
  (name code)
  (deps (order.topscript))
  (action (
    progn
    (setenv OCAMLRUNPARAM "" (run ocaml-topexpect -short-paths -verbose ${<}))
    (diff? order.topscript order.topscript.corrected)))))

(alias ((name sexp) (deps (for.topscript.sexp))))

(rule (
  (targets (for.topscript.sexp))
  (deps    (for.topscript))
  (action (
    with-stdout-to ${@} (
      run ocaml-topexpect -dry-run -sexp -short-paths -verbose ${<})))))

(alias (
  (name code)
  (deps (for.topscript))
  (action (
    progn
    (setenv OCAMLRUNPARAM "" (run ocaml-topexpect -short-paths -verbose ${<}))
    (diff? for.topscript for.topscript.corrected)))))

(alias ((name sexp) (deps (fib.topscript.sexp))))

(rule (
  (targets (fib.topscript.sexp))
  (deps    (fib.topscript))
  (action (
    with-stdout-to ${@} (
      run ocaml-topexpect -dry-run -sexp -short-paths -verbose ${<})))))

(alias (
  (name code)
  (deps (fib.topscript))
  (action (
    progn
    (setenv OCAMLRUNPARAM "" (run ocaml-topexpect -short-paths -verbose ${<}))
    (diff? fib.topscript fib.topscript.corrected)))))

(alias ((name sexp) (deps (memo.topscript.sexp))))

(rule (
  (targets (memo.topscript.sexp))
  (deps    (memo.topscript))
  (action (
    with-stdout-to ${@} (
      run ocaml-topexpect -dry-run -sexp -short-paths -verbose ${<})))))

(alias (
  (name code)
  (deps (memo.topscript))
  (action (
    progn
    (setenv OCAMLRUNPARAM "" (run ocaml-topexpect -short-paths -verbose ${<}))
    (diff? memo.topscript memo.topscript.corrected)))))

